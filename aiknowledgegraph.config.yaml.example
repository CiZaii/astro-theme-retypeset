# AI知识图谱生成配置文件
# 将此文件复制为 aiknowledgegraph.config.yaml 并填入你的配置

aiknowledgegraph:
  # 是否启用AI知识图谱生成
  enable: true
  
  # 是否覆盖已有的知识图谱 (true: 覆盖所有, false: 仅生成缺失的)
  cover_all: false
  
  # 存储知识图谱的字段名
  knowledge_graph_field: "knowledge_graph"
  
  # 日志级别 (0: 仅错误, 1: 基本信息, 2: 详细信息)
  logger: 1
  
  # AI API 配置
  api: "https://api.openai.com/v1/chat/completions"
  token: "your-api-key-here"
  model: "gpt-4"
  
  # AI 提示词 - 关键配置，决定知识图谱的质量
  prompt: |
    请从以下文章内容中提取知识图谱，包括实体节点和它们之间的关系。

    要求：
    1. 识别文章中的关键实体（人物、概念、技术、地点、组织等）
    2. 确定实体之间的关系
    3. 每个实体分配重要性评分 (0-1)
    4. 每个关系分配权重 (0-1)
    5. 返回严格的JSON格式，不要包含任何其他文本

    JSON格式如下：
    {
      "nodes": [
        {
          "id": "实体唯一ID",
          "label": "实体名称",
          "type": "实体类型（如：人物、技术、概念）",
          "description": "实体描述",
          "importance": 0.8,
          "category": "primary"
        }
      ],
      "edges": [
        {
          "id": "关系唯一ID", 
          "source": "源实体ID",
          "target": "目标实体ID",
          "type": "关系类型",
          "label": "关系描述",
          "weight": 0.7
        }
      ]
    }
  
  # 内容清洗规则 (正则表达式)
  ignoreRules:
    - "\\[!\\w+\\].*?\\n"  # 忽略告示块
    - "<!--[\\s\\S]*?-->"  # 忽略HTML注释
  
  # 最大Token数限制
  max_token: 3000
  
  # 并发处理数量
  concurrency: 3